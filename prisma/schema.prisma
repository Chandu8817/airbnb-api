generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model User {
  id          String   @id @default(cuid())
  name        String
  email       String   @unique
  password    String
  role        Role     @default(GUEST)
  listings    Listing[]
  reservations Reservation[]
}

enum Role {
  GUEST
  HOST
}

model Listing {
  id           String        @id @default(cuid())
  ownerId      String
  owner        User          @relation(fields: [ownerId], references: [id])
  title        String
  description  String
  pricePerNight Int
  location     String
  photos       String[]
  amenities    String[]
  category     String
  maxGuests    Int
  reservations Reservation[]
  createdAt    DateTime     @default(now())
}

model Reservation {
  id         String   @id @default(cuid())
  userId     String
  user       User     @relation(fields: [userId], references: [id])
  listingId  String
  listing    Listing  @relation(fields: [listingId], references: [id])
  checkIn    DateTime
  checkOut   DateTime
  guests     Int
  totalPrice Int
  status     ReservationStatus @default(CONFIRMED)
}

enum ReservationStatus {
  CONFIRMED
  CANCELLED
}